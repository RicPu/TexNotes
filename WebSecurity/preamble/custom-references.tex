\usepackage{hyperref}
\usepackage{zref-titleref}
\usepackage{zref-clever}

\zcsetup{
  cap,
  noabbrev
}

\hypersetup{
  linktoc=all,
  colorlinks=true,
  urlcolor=[rgb]{0.82, 0.25, 0.08},
  pdfborder={0 0 0},
  pdflinkmargin=1.0pt,
  pdfdisplaydoctitle
}

\tcbset{
  myttbox/.style={
      nobeforeafter, box align=base, boxsep=0em, before upper={\vphantom{]}},
      left=0.15em, right=0.15em, top=0.25ex, bottom=0.05ex,
      colback=codebg, colframe=codeframe,
      arc=0.1em, rounded corners=all, boxrule=0.3mm,
      grow sidewards by=0.05em, enlarge bottom by=-0.05ex, enlarge top by=-0.4ex,
      breakable,
      enhanced
    }
}

\NewDocumentCommand{\NewTexttt}{m}{
  \tcbox[myttbox]{\texttt{#1}}
}

\tcbset{
  link/.style={
      nobeforeafter, box align=base, boxsep=0em, before upper={\vphantom{]}},
      left=0.15em, right=0.15em, top=0.25ex, bottom=0.05ex,
      arc=0.1em, rounded corners=all, boxrule=0.3mm,
      grow sidewards by=0.05em, enlarge bottom by=-0.05ex, enlarge top by=-0.4ex
    }
}

\tcbset{
  refbox/.style  = {colframe=black!30, colback=black!3},
  pagebox/.style = {refbox, boxsep=0.1ex, bottom=0.25ex},
  hrefbox/.style = {colframe=black!10!UrlColor!70, colback=UrlColor!15},
  citebox/.style = {left=0em, right=0em, bottom=0.25ex, colframe=black!10!CiteColor!80, colback=CiteColor!20}
}

\NewTCBox{\refbox} {!O{}}{link,refbox, #1}
\NewTCBox{\pagebox}{!O{}}{link,pagebox,#1}
\NewTCBox{\hrefbox}{!O{}}{link,hrefbox,#1}
\NewTCBox{\citebox}{!O{}}{link,citebox,#1}

\NewCommandCopy{\hrefold}{\href}
\NewCommandCopy{\urlold}{\url}

\RenewDocumentCommand{\href}{O{} m m}{\hrefold{#2}{\hrefbox[#1]{#3}}}
\RenewDocumentCommand{\url}{O{} m}{\href[#1]{#2}{\nolinkurl{#2}}}

\DeclareDocumentCommand{\Cref}{s m}{%
  \hyperref[#2]{%
    \refbox[right={\IfBooleanTF{#1}{0.15em}{0.1em}}]{%
      \ztitleref{#2}%
      \IfBooleanF{#1}{%
        \textsuperscript{\ttfamily\tiny\(\,\to\,\)p.\zpageref{#2}}%	  
      }%
    }%
  }%
}